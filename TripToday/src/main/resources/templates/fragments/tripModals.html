<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="addTripModal">
    <div class="modal fade" id="addTripModal" tabindex="-1" role="dialog" aria-labelledby="addTripModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <form id="addTripForm" method="post" th:action="@{/create-trip}" class="needs-validation" novalidate>
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addTripModalLabel">Add New Trip</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="addGuideSelect">Select Guide</label>
                            <select class="form-control" name="guideId" id="addGuideSelect" required>
                                <option value="" disabled selected>Select Guide</option>
                                <option th:each="guide : ${guides}"
                                        th:if="${guide != null}"
                                        th:value="${guide.id}"
                                        th:text="${guide.email}">
                                </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="addDestination">Destination</label>
                            <input type="text" class="form-control" name="destination" id="addDestination" required>
                        </div>
                        <div class="form-group">
                            <label for="addDepartureLocation">Departure Location</label>
                            <input type="text" class="form-control" name="departureLocation" id="addDepartureLocation" required>
                        </div>
                        <div class="form-group">
                            <label for="addDepartureDate">Departure Date</label>
                            <input type="date" class="form-control" name="departureDate" id="addDepartureDate" required>
                        </div>
                        <div class="form-group">
                            <label for="addReturnDate">Return Date</label>
                            <input type="date" class="form-control" name="returnDate" id="addReturnDate" required>
                        </div>
                        <div class="form-group">
                            <label for="addDepartureHour">Departure Hour</label>
                            <input type="time" class="form-control" name="departureHour" id="addDepartureHour" required>
                        </div>
                        <div class="form-group">
                            <label for="addDurationDays">Duration (days)</label>
                            <input type="number" class="form-control" name="durationDays" id="addDurationDays" required min="1" readonly>
                        </div>
                        <div class="form-group">
                            <label for="addAvailableSpots">Available Spots</label>
                            <input type="number" class="form-control" name="availableSpots" id="addAvailableSpots" required min="0">
                        </div>
                        <div class="form-group">
                            <label for="addRegistrationFee">Registration Fee</label>
                            <input type="number" step="0.01" class="form-control" name="registrationFee" id="addRegistrationFee" required min="0">
                        </div>
                        <div class="form-group">
                            <label for="addHotelName">Hotel Name</label>
                            <input type="text" class="form-control" name="hotelName" id="addHotelName" required>
                        </div>
                        <div class="form-group">
                            <label for="addDescription">Description</label>
                            <textarea class="form-control" name="description" id="addDescription" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="addPicture">Picture URL</label>
                            <input type="url" class="form-control" name="picture" id="addPicture" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-success">Save Trip</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div th:fragment="enrollModal">
    <div class="modal fade" id="enrollModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <form th:action="@{/enroll}" method="post" id="enrollForm" class="needs-validation" novalidate>
                <input type="hidden" name="tripId" id="modalTripId"/>
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Confirm Enrollment</h5>
                        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                    </div>
                    <div class="modal-body">
                        Are you sure you want to enroll in <strong id="modalDestination"></strong>?
                        <div class="form-group mt-3">
                            <label>Card Number</label>
                            <input type="text" class="form-control" name="cardNumber" required pattern="\d{16}"
                                   title="Please enter a 16-digit card number" maxlength="16">
                        </div>
                        <div class="form-group">
                            <label>CVV</label>
                            <input type="text" class="form-control" name="cvv" required pattern="\d{3}"
                                   title="Please enter a 3-digit CVV" maxlength="3">
                        </div>
                        <div class="form-group">
                            <label>Expiration Date (MM/YY)</label>
                            <input type="text" class="form-control" name="expirationDate" required
                                   pattern="(0[1-9]|1[0-2])\/\d{2}"
                                   title="Use MM/YY format. Date cannot be in the past." maxlength="5">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-success">Yes, Enroll</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div th:fragment="editTripModal">
    <div class="modal fade" id="editTripModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <form id="editTripForm" method="post" th:action="@{/update-trip}" class="needs-validation" novalidate>
                <input type="hidden" name="id" id="editTripId">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Edit Trip</h5>
                        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="editGuideSelect">Select Guide</label>
                            <select class="form-control" name="guideId" id="editGuideSelect" required>
                                <option value="" disabled>Select Guide</option>
                                <option th:each="guide : ${guides}"
                                        th:if="${guide != null}"
                                        th:value="${guide.id}"
                                        th:text="${guide.email}">
                                </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editDestination">Destination</label>
                            <input type="text" class="form-control" name="destination" id="editDestination" required>
                        </div>
                        <div class="form-group">
                            <label for="editDepartureLocation">Departure Location</label>
                            <input type="text" class="form-control" name="departureLocation" id="editDepartureLocation" required>
                        </div>
                        <div class="form-group">
                            <label for="editDepartureDate">Departure Date</label>
                            <input type="date" class="form-control" name="departureDate" id="editDepartureDate" required>
                        </div>
                        <div class="form-group">
                            <label for="editReturnDate">Return Date</label>
                            <input type="date" class="form-control" name="returnDate" id="editReturnDate" required>
                        </div>
                        <div class="form-group">
                            <label for="editDepartureHour">Departure Hour</label>
                            <input type="time" class="form-control" name="departureHour" id="editDepartureHour" required>
                        </div>
                        <div class="form-group">
                            <label for="editDurationDays">Duration (days)</label>
                            <input type="number" class="form-control" name="durationDays" id="editDurationDays" required min="1" readonly>
                        </div>
                        <div class="form-group">
                            <label for="editAvailableSpots">Available Spots</label>
                            <input type="number" class="form-control" name="availableSpots" id="editAvailableSpots" required min="0">
                        </div>
                        <div class="form-group">
                            <label for="editRegistrationFee">Registration Fee</label>
                            <input type="number" step="0.01" class="form-control" name="registrationFee" id="editRegistrationFee" required min="0">
                        </div>
                        <div class="form-group">
                            <label for="editHotelName">Hotel Name</label>
                            <input type="text" class="form-control" name="hotelName" id="editHotelName" required>
                        </div>
                        <div class="form-group">
                            <label for="editDescription">Description</label>
                            <textarea class="form-control" name="description" id="editDescription" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="editPicture">Picture URL</label>
                            <input type="url" class="form-control" name="picture" id="editPicture" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Update Trip</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div th:fragment="deleteTripModal">
    <div class="modal fade" id="deleteTripModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <form id="deleteTripForm" method="post" th:action="@{/delete-trip}">
                <input type="hidden" name="id" id="deleteTripId">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Confirm Delete</h5>
                        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                    </div>
                    <div class="modal-body">
                        Are you sure you want to delete this trip?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

</body>
</html>